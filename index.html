<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chocolate Day | Dimple My Dhapudi ‚ù§Ô∏è</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Pacifico&family=Croissant+One&family=Poppins:wght@300;400;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <style>
        :root {
            --color-gold: #ffd700;
            --bg-color: #1a0a0a;
            --choco-mid: #3a1c0f;
            --white: #ffffff;
            --red: #ff3b3b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            width: 100vw; height: 100vh;
            background: var(--bg-color);
            display: flex; justify-content: center; align-items: center;
            font-family: 'Poppins', sans-serif;
            color: #fff; overflow: hidden;
        }

        /* --- SLIDE SYSTEM --- */
        .slide {
            width: 100%; height: 100%;
            display: none;
            flex-direction: column; justify-content: center; align-items: center;
            text-align: center; position: absolute;
            background: radial-gradient(circle, var(--choco-mid), var(--bg-color));
            padding: 25px;
        }

        .slide.active { display: flex; animation: slideIn 0.5s forwards; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- BUTTONS --- */
        .btn-main, .btn-screenshot {
            background: linear-gradient(135deg, var(--color-gold), #ffcc33);
            color: #1a0a0a; border: none; padding: 16px 32px; border-radius: 50px;
            font-weight: 700; text-transform: uppercase; cursor: pointer;
            margin-top: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.5);
            transition: 0.3s; font-size: 14px;
        }
        .btn-main:active { transform: scale(0.95); }

        /* --- SLIDE 0: LOCK SCREEN --- */
        .lock-card {
            background: rgba(255,255,255,0.06); padding: 45px 35px;
            border-radius: 30px; border: 1px solid rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(15px); width: 330px; text-align: center;
        }
        .lock-card h1 { font-family: 'Montserrat'; font-size: 24px; color: var(--color-gold); margin-bottom: 20px; }
        .lock-card input {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: #fff; color: #333; text-align: center; font-size: 16px;
        }
        #lock-err { color: #ff8080; font-size: 13px; margin-top: 15px; min-height: 20px; }

        /* --- SLIDE 1: WELCOME --- */
        .welcome-title { font-family: 'Pacifico'; font-size: 2.8rem; color: var(--color-gold); text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .welcome-sub { margin-top: 20px; font-size: 18px; opacity: 0.9; }

        /* --- SLIDE 2: SHARARAT --- */
        #wrap-img, #choco-img-s1 {
            width: 100%; max-width: 300px; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6); border: 3px solid var(--color-gold);
        }

        /* --- SLIDE 3: MEMORY WRAPPER --- */
        .wrapper-container { width: 300px; height: 400px; position: relative; perspective: 1200px; cursor: pointer; }
        .photo-frame {
            width: 100%; height: 100%; background: #fff; padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: rotate(-3deg);
            position: absolute; display: flex; flex-direction: column;
        }
        .photo-inner {
            flex: 1; background: url("https://i.ibb.co/k2V12GN1/file-000000001ed861fabbf1c05f143e4338-2.png") center/cover no-repeat;
            border: 1px solid #ccc;
        }
        .photo-caption { margin-top: 10px; color: #333; font-family: monospace; font-weight: bold; }
        .wrapper-lid {
            position: absolute; inset: 0; background: linear-gradient(135deg,#7B1FA2,#4A148C);
            border: 2px solid gold; display: flex; align-items: center; justify-content: center;
            transform-origin: left center; backface-visibility: hidden; z-index: 2;
        }
        .wrapper-text { font-family: 'Playfair Display', serif; font-size: 2rem; color: gold; transform: rotate(-15deg); }
        .typewriter-text { margin-top: 20px; font-size: 1.1rem; min-height: 60px; color: var(--color-gold); font-weight: 600; }

        /* --- SLIDE 5: GAME --- */
        .game-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 30px; }
        .choco-piece {
            width: 120px; height: 90px; background: linear-gradient(145deg, #4e2b1f, #2b1712);
            border-radius: 12px; border: 1px solid #1a0a0a; cursor: pointer;
            box-shadow: 8px 8px 15px rgba(0,0,0,0.5);
        }

        /* --- SLIDE 6: PLAYER --- */
        .player-card {
            width: 340px; padding: 25px; background: rgba(0,0,0,0.7);
            border-radius: 35px; border: 2px solid var(--color-gold); position: relative;
        }
        .img-container {
            width: 100%; height: 260px; border-radius: 20px;
            overflow: hidden; position: relative; margin: 15px 0; background: #000;
        }
        #bgBlur { position: absolute; inset: 0; background-size: cover; filter: blur(15px); opacity: 0.4; }
        #mainImg { position: relative; width: 100%; height: 100%; object-fit: contain; z-index: 2; }
        #lyricText { font-family: 'Croissant One', cursive; font-size: 19px; min-height: 70px; display: flex; align-items: center; justify-content: center; opacity: 0; transition: 0.4s; color: #fff; }
        #lyricText.active { opacity: 1; }

        .vol-menu {
            position: absolute; bottom: 100px; right: 25px;
            background: rgba(0,0,0,0.95); border: 1.5px solid var(--color-gold);
            padding: 12px; border-radius: 15px; display: none; flex-direction: column; gap: 10px; z-index: 100;
        }
        .vol-menu button { background: none; border: none; color: white; padding: 5px 15px; cursor: pointer; font-weight: bold; }

        /* --- FULLSCREEN --- */
        .fullscreen {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            display: none; justify-content: center; align-items: center; z-index: 999;
        }
        .fullscreen.active { display: flex; }
        .fullscreen img { max-width: 90%; max-height: 80%; border-radius: 15px; border: 2px solid #fff; }
        .close-fs { position: absolute; top: 30px; right: 30px; color: #fff; font-size: 30px; cursor: pointer; }

        #retryBtn {
            display: none; position: fixed; bottom: 40px;
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: #fff; padding: 18px 35px; border-radius: 50px;
            font-weight: 800; border: none; cursor: pointer; z-index: 500;
            box-shadow: 0 10px 25px rgba(255, 65, 108, 0.4);
            animation: bounce 1s infinite alternate;
        }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.1); } }
    </style>
</head>
<body>

    <section id="slide-0" class="slide active">
        <div class="lock-card">
            <h1>CHOC-LOCK üç´</h1>
            <input type="password" id="passInput" placeholder="Password De Ghelsodi...">
            <div id="lock-err"></div>
            <button class="btn-main" style="width: 100%;" onclick="checkPassword()">Unlock Now</button>
            <p style="font-size: 11px; margin-top: 15px; opacity: 0.6;">Hint: S _ _ _ _   D _ _ _ Y</p>
        </div>
    </section>

    <section id="slide-1" class="slide">
        <h1 class="welcome-title">Happy Chocolate Day Dimple! ‚ù§Ô∏è</h1>
        <p class="welcome-sub">Taiyaar ho apne meethay surprises ke liye?</p>
        <button class="btn-main" onclick="navTo(2)">Chalo Shuru Karein! üç´</button>
    </section>

    <section id="slide-2" class="slide">
        <div style="max-width:300px">
            <img id="wrap-img" src="https://i.ibb.co/1DGR6nJ/image.jpg" onclick="triggerShararat()" style="cursor:pointer;">
            <img id="choco-img-s1" src="https://i.ibb.co/hJ6CHYXC/image.jpg" style="display:none;">
            <div id="s1-msg" style="display:none; margin-top:15px;">
                <p>Ohhh! <span style="color:var(--color-gold)">Galti Se Hawas Waali Chocolate</span> Nikal Gayi. üòÇ</p>
                <button class="btn-screenshot" onclick="navTo(3)">Next Surprise ‚û°Ô∏è</button>
            </div>
        </div>
    </section>

    <section id="slide-3" class="slide">
        <div class="wrapper-container" id="memoryWrapper">
            <div class="photo-frame">
                <div class="photo-inner" onclick="openFull()"></div>
                <div class="photo-caption">Our Sweetest Memory ‚ù§Ô∏è</div>
            </div>
            <div class="wrapper-lid">
                <div class="wrapper-text">Cadbury Dairy Milk</div>
            </div>
        </div>
        <p class="typewriter-text" id="typeText"></p>
        <button id="nextAfterMem" class="btn-main" style="display:none;" onclick="navTo(4)">My Promise üíñ</button>
    </section>

    <section id="slide-4" class="slide">
        <div style="padding: 35px; border: 2px solid var(--color-gold); border-radius: 25px; background: rgba(0,0,0,0.3); max-width: 320px;">
            <h1 style="font-family: 'Pacifico'; color: var(--color-gold);">I Promise...</h1>
            <p style="margin-top: 20px; line-height: 1.7; font-size: 16px;">
                To keep your life as sweet as your favorite chocolate and always be the one who makes you smile (and annoys you too). ‚ù§Ô∏è
            </p>
            <button class="btn-main" onclick="navTo(5)">Break To Unlock üî®</button>
        </div>
    </section>

    <section id="slide-5" class="slide">
        <h2 style="font-family: 'Pacifico'; color: var(--color-gold); font-size: 24px;">Smash The Pieces!</h2>
        <div class="game-grid">
            <div class="choco-piece" onclick="smashChoco(this)"></div>
            <div class="choco-piece" onclick="smashChoco(this)"></div>
            <div class="choco-piece" onclick="smashChoco(this)"></div>
            <div class="choco-piece" onclick="smashChoco(this)"></div>
        </div>
    </section>

    <section id="slide-6" class="slide">
        <div class="player-card">
            <div style="text-align: center;">
                <h1 style="font-family: 'Pacifico'; color: var(--color-gold); font-size: 20px;">Chocolate Day Special</h1>
                <h2 style="color: var(--red); font-size: 16px;">Janam Janam</h2>
            </div>
            <div class="img-container">
                <div id="bgBlur"></div>
                <img id="mainImg" src="">
            </div>
            <div id="lyricText">ÍßÅ‡º∫ùïØùñçùñÜùñÜùñïùñöùñâùñéùñé‡ºªÍßÇ</div>
            <input type="range" id="seek" value="0" step="0.1" style="width: 100%; accent-color: var(--color-gold);">
            <div style="display: flex; justify-content: center; gap: 35px; align-items: center; margin-top:15px;">
                <button onclick="shufflePics()" style="background:none; border:none; cursor:pointer;"><svg width="24" fill="var(--color-gold)" viewBox="0 0 24 24"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.45 20 9.5V4h-5.5zm.59 11.59l-1.42 1.41 2.5 2.5a.996.996 0 1 0 1.41-1.41l-2.49-2.5z"/></svg></button>
                <div onclick="toggleMusic()" style="width:65px; height:65px; border-radius:50%; border:2px solid var(--color-gold); display:flex; align-items:center; justify-content:center; cursor:pointer;">
                    <svg id="playIcon" width="30" fill="var(--color-gold)" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                </div>
                <button onclick="toggleVol(event)" style="background:none; border:none; cursor:pointer;"><svg width="24" fill="var(--color-gold)" viewBox="0 0 24 24"><path d="M12 3a9 9 0 0 0-9 9v7c0 1.1.9 2 2 2h4v-8H5v-1c0-3.87 3.13-7 7-7s7 3.13 7 7v1h-4v8h4c1.1 0 2-.9 2-2v-7a9 9 0 0 0-9-9z"/></svg></button>
            </div>
            <div class="vol-menu" id="volMenu">
                <button onclick="setVolume(1)">HIGH üî•</button>
                <button onclick="setVolume(0.5)">MID üîâ</button>
                <button onclick="setVolume(0)">MUTE üîá</button>
            </div>
        </div>
        <button id="retryBtn" onclick="location.reload()">Wanna do this again? üç´üîÑ</button>
    </section>

    <div class="fullscreen" id="fsOverlay">
        <div class="close-fs" onclick="closeFull()">‚úï</div>
        <img src="https://i.ibb.co/k2V12GN1/file-000000001ed861fabbf1c05f143e4338-2.png">
    </div>
    <audio id="mainAudio"><source src="http://ddl.safone.vip/4428869/Projec2.mp3?hash=AgADDC" type="audio/mpeg"></audio>

    <script>
        // --- Navigation Control ---
        function navTo(n) {
            document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
            document.getElementById('slide-' + n).classList.add('active');
            if (n === 6) initPlayer();
        }

        // --- Slide 0: Password ---
        function checkPassword() {
            const input = document.getElementById("passInput").value;
            if(input === "Sugar Daddy") navTo(1);
            else {
                document.getElementById("lock-err").innerText = "Dhapudi Galat Hai! üòÇ";
                gsap.from(".lock-card", {x: 10, repeat: 5, yoyo: true, duration: 0.05});
            }
        }

        // --- Slide 2: Shararat Trigger ---
        function triggerShararat() {
            document.getElementById('wrap-img').style.display = 'none';
            document.getElementById('choco-img-s1').style.display = 'block';
            document.getElementById('s1-msg').style.display = 'block';
            gsap.from("#choco-img-s1", {duration: 0.6, scale: 0.5, ease: "back.out(1.7)"});
        }

        // --- Slide 3: Memory Wrapper ---
        let memOpened = false;
        document.getElementById("memoryWrapper").addEventListener("click", () => {
            if (memOpened) return;
            memOpened = true;
            gsap.to(".wrapper-lid", {rotationY: -180, duration: 1.5, ease: "power2.inOut"});
            
            const text = "First Time I Saw You, My Heart Melted Like Chocolate üç´‚ù§Ô∏è";
            const box = document.getElementById("typeText");
            box.style.opacity = 1; box.innerHTML = "";
            let i = 0;
            function type() {
                if (i < text.length) {
                    box.innerHTML += text.charAt(i++);
                    setTimeout(type, 55);
                } else {
                    document.getElementById("nextAfterMem").style.display = "inline-block";
                    gsap.from("#nextAfterMem", {opacity: 0, y: 10, duration: 0.5});
                }
            }
            setTimeout(type, 1200);
        });

        // --- Slide 5: Game ---
        let piecesBroken = 0;
        function smashChoco(el) {
            gsap.to(el, {scale: 0, opacity: 0, rotation: 45, duration: 0.4, onComplete: () => {
                el.style.visibility = "hidden";
                if(++piecesBroken === 4) navTo(6);
            }});
        }

        // --- Slide 6: Music Player ---
        const audio = document.getElementById("mainAudio"), seek = document.getElementById("seek"),
              lyricDiv = document.getElementById("lyricText"), mainImg = document.getElementById("mainImg"),
              bgBlur = document.getElementById("bgBlur"), playIcon = document.getElementById("playIcon");

        const imgs = [
            "https://i.ibb.co/SD3pB0Hy/Whats-App-Image-2026-02-02-at-3-37-08-PM-1.jpg", 
            "https://i.ibb.co/cXgSyhYk/Snapchat-1453332743.jpg",
            "https://i.ibb.co/9mmVRMjc/p3.jpg"
        ];
        let currentImgIdx = 0;

        const lyricLines = [
            {t: 0.2, text: "Talab teri hai mujhe..."},
            {t: 6, text: "Nason mein tu nasha banke ghulna yunhi"},
            {t: 12, text: "Meri mohabbat ka karna tu haq ye ada"},
            {t: 17, text: "Meri hoke hamesha hi rehna ‚ù§Ô∏è"}
        ];

        function initPlayer() {
            updatePlayerUI();
            audio.play().catch(() => console.log("User Interaction Needed"));
            playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
        }

        function updatePlayerUI() {
            mainImg.src = imgs[currentImgIdx];
            bgBlur.style.backgroundImage = `url(${imgs[currentImgIdx]})`;
        }

        function shufflePics() {
            currentImgIdx = (currentImgIdx + 1) % imgs.length;
            gsap.to(mainImg, {opacity: 0, duration: 0.3, onComplete: () => {
                updatePlayerUI();
                gsap.to(mainImg, {opacity: 1, duration: 0.3});
            }});
        }

        function toggleMusic() {
            if(audio.paused) {
                audio.play();
                playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
            } else {
                audio.pause();
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function toggleVol(e) {
            e.stopPropagation();
            const m = document.getElementById("volMenu");
            m.style.display = (m.style.display === "flex") ? "none" : "flex";
        }

        function setVolume(v) { audio.volume = v; document.getElementById("volMenu").style.display = "none"; }

        audio.ontimeupdate = () => {
            seek.value = audio.currentTime;
            
            // Show Retry Button 5 seconds before end
            if (audio.duration && (audio.duration - audio.currentTime <= 5)) {
                document.getElementById("retryBtn").style.display = "block";
            } else {
                document.getElementById("retryBtn").style.display = "none";
            }

            // Lyrics Logic
            let currTime = audio.currentTime;
            for(let i = lyricLines.length - 1; i >= 0; i--) {
                if(currTime >= lyricLines[i].t) {
                    if(lyricDiv.innerText !== lyricLines[i].text) {
                        lyricDiv.classList.remove("active");
                        setTimeout(() => {
                            lyricDiv.innerText = lyricLines[i].text;
                            lyricDiv.classList.add("active");
                        }, 100);
                    }
                    break;
                }
            }
        };

        audio.onloadedmetadata = () => seek.max = audio.duration;
        seek.oninput = () => audio.currentTime = seek.value;

        // Fullscreen Logic
        function openFull() { document.getElementById("fsOverlay").classList.add("active"); }
        function closeFull() { document.getElementById("fsOverlay").classList.remove("active"); }
        
        // Close menus on click
        document.onclick = () => document.getElementById("volMenu").style.display = "none";
    </script>
</body>
</html>
